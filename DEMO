<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ainn Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  height: 100vh;
  background: black;
  color: white;
  font-family: 'Press Start 2P', cursive;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  position: relative;
}
/* Snow */
#snowContainer { position: fixed; inset:0; z-index:1; pointer-events:none; }
.snowflake { position: absolute; font-size: 20px; color: white; opacity: 0.8; animation: fall linear infinite; }
@keyframes fall { 0% { transform: translateY(-10vh); } 100% { transform: translateY(110vh); } }
/* Leaderboard */
#leaderboard-container { position: absolute; left: 18px; top: 18px; z-index:5; display:flex; align-items:flex-start; gap:8px; }
#leaderboard-icon { font-size: 32px; color: cyan; cursor: pointer; }
#leaderboard { display: none; position: absolute; left: 50px; top: 0; background: rgba(0,0,0,0.8); border: 2px solid cyan; padding: 16px; border-radius: 8px; width: 260px; max-height: 84vh; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none; font-size: 14px; z-index: 3; color: white; }
#leaderboard::-webkit-scrollbar { display: none; }
#leaderboard.show { display: block; }
#leaderboard h2 { margin:0 0 8px 0; font-size:16px; color:cyan; text-align:center; }
#leaderboard ol { padding-left: 0; list-style-position: inside; }
#leaderboard li { display: flex; justify-content: space-between; align-items: center; text-align:left; margin-bottom: 10px; padding: 4px 6px; font-size: 14px; border-bottom: 1px solid rgba(0,255,255,0.2); color: white; }
#leaderboard li:last-child { border-bottom: none; }
/* Game container */
#gameContainer { text-align: center; z-index: 2; width: 760px; max-width: 92%; display: flex; flex-direction: column; align-items: center; }
#login-container { display: flex; align-items: center; gap: 8px; }
input[type="text"] { padding: 10px; font-size:16px; border-radius:6px; border:none; width:260px; background: #333; color: white; }
button { padding:10px; font-size:20px; border-radius:6px; border:none; cursor:pointer; background:cyan; color:black; font-family: 'Press Start 2P', cursive; transition: background 0.2s ease, color 0.2s ease; }
button:hover { background:darkcyan; color:white; }
/* Quiz */
#quiz { display:none; margin-top:8px; width: 100%; }
#timer { font-size:18px; color:yellow; margin-bottom:8px; }
.question { font-size:20px; margin:12px 0; min-height:44px; color: white; text-align:center; white-space: pre-wrap; border-right: 2px solid cyan; display:inline-block; overflow: hidden; }
#answers { display:flex; flex-direction:column; align-items:center; gap:10px; }
.answer { width:60%; max-width:520px; padding:12px 16px; border-radius:8px; background:#111; border:2px solid cyan; cursor:pointer; font-size:16px; text-align:center; transition: all 0.3s ease-in-out; color: white; opacity: 0; transform: translateY(10px); }
.answer.show { opacity: 1; transform: translateY(0); }
.answer.disabled { background:grey; cursor:not-allowed; color:#ccc; border-color: grey; }
.answer.correct { background: #4CAF50; color: white; border-color: #4CAF50; }
.answer.wrong { background: #f44336; color: white; border-color: #f44336; }
/* Alert Toast */
#alertContainer { position: fixed; top: 20px; right: 20px; z-index: 10; display: flex; flex-direction: column; gap: 10px; width: auto; max-width: 300px; pointer-events: none; align-items: flex-end; }
.alert-toast { background-color: rgba(50,50,50,0.9); color: white; padding: 12px 20px; border-radius: 8px; text-align: center; box-shadow: 0 4px 8px rgba(0,0,0,0.3); opacity: 0; transition: opacity 0.3s ease, transform 0.3s ease; transform: translateY(20px); pointer-events: all; font-family: 'Press Start 2P', cursive; }
.alert-toast.show { opacity:1; transform:translateY(0); }
.alert-toast.info { border:2px solid #2196F3; }
.alert-toast.success { border:2px solid #4CAF50; }
.alert-toast.error { border:2px solid #f44336; }
.alert-toast.warning { border:2px solid #ff9800; }
/* Score Popup */
#scorePopup { display:none; position: fixed; top:50%; left:50%; transform: translate(-50%,-50%); background: #111; border: 2px solid cyan; padding: 30px 40px; border-radius: 16px; text-align: center; font-size: 20px; color: yellow; box-shadow: 0 8px 20px rgba(0,255,255,0.5); z-index: 20; }
#scorePopup h2 { margin: 0 0 15px 0; color: cyan; font-size: 24px;}
#scorePopup p { margin: 10px 0; color: white; }
#scorePopup button { margin-top: 20px; }
/* Title Animation */
#gameTitle { font-size: 32px; color: cyan; white-space: nowrap; overflow: hidden; border-right: 2px solid cyan; display: inline-block; animation: blink-cursor 0.7s step-end infinite; }
@keyframes blink-cursor { 50% { border-color: transparent; } }
</style>
</head>
<body>

<div id="snowContainer"></div>

<div id="leaderboard-container">
  <div id="leaderboard-icon" title="Click to view leaderboard">üèÜ</div>
  <div id="leaderboard">
    <h2>Leaderboard</h2>
    <ol id="leaderboard-list"></ol>
  </div>
</div>

<div id="gameContainer">
  <h1 id="gameTitle"></h1>
  <div id="login-container">
    <input type="text" id="username" placeholder="Enter username" />
    <button id="startBtn">‚û°</button>
  </div>
  <div id="quiz">
    <div id="timer">Time Left: 15s</div>
    <div class="question" id="question"></div>
    <div id="answers"></div>
    <div style="margin-top:20px;">
      <button id="exitBtn">Exit to Menu</button>
    </div>
  </div>
</div>

<div id="alertContainer"></div>
<div id="scorePopup">
  <h2>Quiz Finished!</h2>
  <p>Your Score: <span id="finalScore">0</span></p>
  <button id="restartBtn">Play Again</button>
</div>

<script>
// --- 50 Questions ---
const QUESTIONS=[
{q:"What does HTML stand for?",a:["Hyper Text Markup Language","High-level Text Machine Language","Hyperlink and Text Management Language","Home Tool Markup Language"],correct:0},
{q:"Which programming language is known as the 'mother of all languages'?",a:["Assembly","Fortran","C","Algol"],correct:3},
{q:"What does CSS stand for?",a:["Cascading Style Sheets","Computer Style Sheets","Creative Style Solutions","Coded Style Syntax"],correct:0},
{q:"Which of the following is NOT a JavaScript framework?",a:["React","Angular","Vue","Django"],correct:3},
{q:"What is the primary function of a database?",a:["To process user input","To store and retrieve data","To display web pages","To execute algorithms"],correct:1},
{q:"What does API stand for?",a:["Application Programming Interface","Advanced Protocol Integration","Automated Program Interaction","Application Process Indicator"],correct:0},
{q:"Which data structure uses a Last-In, First-Out (LIFO) principle?",a:["Queue","Stack","Tree","Linked List"],correct:1},
{q:"In object-oriented programming, what is encapsulation?",a:["Bundling data and methods into a single unit","Creating new classes from existing ones","Defining abstract interfaces","Allowing objects to take on multiple forms"],correct:0},
{q:"What is Git primarily used for?",a:["Database management","Version control","Graphic design","Network security"],correct:1},
{q:"Which HTML tag is used to define an internal style sheet?",a:["<script>","<css>","<style>","<link>"],correct:2},
// Add remaining questions up to 50 in same format...
];

// DOM Elements
const usernameInput=document.getElementById('username');
const startBtn=document.getElementById('startBtn');
const loginContainer=document.getElementById('login-container');
const quizContainer=document.getElementById('quiz');
const questionElement=document.getElementById('question');
const answersElement=document.getElementById('answers');
const timerElement=document.getElementById('timer');
const exitBtn=document.getElementById('exitBtn');
const leaderboardIcon=document.getElementById('leaderboard-icon');
const leaderboard=document.getElementById('leaderboard');
const leaderboardList=document.getElementById('leaderboard-list');
const scorePopup=document.getElementById('scorePopup');
const finalScoreElement=document.getElementById('finalScore');
const restartBtn=document.getElementById('restartBtn');
const gameTitle=document.getElementById('gameTitle');

let currentQuestionIndex=0, score=0, timer, timeLeft=15, userName='', quizStarted=false, canAnswer=true;

// --- Alerts ---
function showAlert(msg,type='info',dur=3000){
  const a=document.createElement('div');a.className=`alert-toast ${type}`;a.textContent=msg;
  document.getElementById('alertContainer').appendChild(a);
  void a.offsetWidth;a.classList.add('show');
  setTimeout(()=>{a.classList.remove('show');a.addEventListener('transitionend',()=>a.remove());},dur);
}

// --- Snow ---
function createSnowflake(){
  const s=document.createElement('div');s.className='snowflake';s.textContent='‚ùÑ';document.getElementById('snowContainer').appendChild(s);
  s.style.left=`${Math.random()*100}vw`;s.style.fontSize=`${Math.random()*15+10}px`;s.style.animationDuration=`${Math.random()*5+3}s`;
  s.addEventListener('animationend',()=>{s.remove();createSnowflake();});
}
function startSnowfall(n=50){for(let i=0;i<n;i++)createSnowflake();}

// --- Leaderboard ---
function getLeaderboardData(){const d=localStorage.getItem('leaderboardData');return d?JSON.parse(d):[];}
function saveLeaderboardData(d){localStorage.setItem('leaderboardData',JSON.stringify(d));}
function updateLeaderboardDisplay(){const data=getLeaderboardData().sort((a,b)=>b.score-a.score);leaderboardList.innerHTML='';data.forEach((e,i)=>{const li=document.createElement('li');li.innerHTML=`<span>${i+1}. ${e.user}</span> <span>${e.score}</span>`;leaderboardList.appendChild(li);});}
function addScoreToLeaderboard(user,score){let data=getLeaderboardData();const idx=data.findIndex(e=>e.user===user);if(idx>=0){if(score>data[idx].score)data[idx].score=score;}else{data.push({user,score});}saveLeaderboardData(data);updateLeaderboardDisplay();}

// --- Quiz ---
function startTimer(){clearInterval(timer);timeLeft=15;timerElement.textContent=`Time Left: ${timeLeft}s`;timer=setInterval(()=>{timeLeft--;timerElement.textContent=`Time Left: ${timeLeft}s`;if(timeLeft<=0){clearInterval(timer);handleAnswer(null);}},1000);}
function typeQuestion(text,callback){questionElement.textContent='';let i=0;const interval=setInterval(()=>{questionElement.textContent+=text[i];i++;if(i>=text.length){clearInterval(interval);callback();}},70);}
function showQuestion(){
  if(currentQuestionIndex>=QUESTIONS.length){endQuiz();return;}
  const q=QUESTIONS[currentQuestionIndex];
  answersElement.innerHTML='';canAnswer=true;
  typeQuestion(q.q, ()=>{
    q.a.forEach((t,i)=>{
      const b=document.createElement('button');b.className='answer';b.textContent=t;b.dataset.index=i;
      b.addEventListener('click',()=>{if(!canAnswer)return;canAnswer=false;handleAnswer(i);});
      answersElement.appendChild(b);setTimeout(()=>b.classList.add('show'),50*i);
    });
    startTimer(); // Start timer only after question fully typed
  });
}
function handleAnswer(idx){
  clearInterval(timer);const q=QUESTIONS[currentQuestionIndex];const btns=answersElement.querySelectorAll('.answer');
  btns.forEach((b,i)=>{b.classList.add('disabled');if(i===q.correct)b.classList.add('correct');else if(i===idx)b.classList.add('wrong');});
  if(idx===q.correct){score+=timeLeft;showAlert('Correct!','success');}else if(idx===null){showAlert("Time's up!",'warning');}else{showAlert('Incorrect!','error');}
  currentQuestionIndex++;setTimeout(showQuestion,1500);
}
function startQuiz(){
  userName=usernameInput.value.trim();if(!userName){showAlert('Enter username!','error');return;}
  gameTitle.style.display='none'; // Hide title during quiz
  loginContainer.style.display='none';quizContainer.style.display='block';
  score=0;currentQuestionIndex=0;quizStarted=true;
  showAlert(`Welcome, ${userName}!`,'info');
  showQuestion();
}
function endQuiz(){clearInterval(timer);quizContainer.style.display='none';finalScoreElement.textContent=score;scorePopup.style.display='block';quizStarted=false;addScoreToLeaderboard(userName,score);}
function exitToMenu(){clearInterval(timer);quizContainer.style.display='none';loginContainer.style.display='flex';scorePopup.style.display='none';usernameInput.value='';quizStarted=false;gameTitle.style.display='inline-block';showAlert('Exited quiz.','info');}
function restartQuiz(){scorePopup.style.display='none';gameTitle.style.display='inline-block';loginContainer.style.display='flex';}

// --- Title Typewriter ---
const titleText="Ainn Quiz";let titleIndex=0;
function typeTitle(){if(titleIndex<=titleText.length){gameTitle.textContent=titleText.slice(0,titleIndex);titleIndex++;setTimeout(typeTitle,150);}}
typeTitle();

// --- Event Listeners ---
startBtn.addEventListener('click',startQuiz);
exitBtn.addEventListener('click',exitToMenu);
restartBtn.addEventListener('click',restartQuiz);
usernameInput.addEventListener('keypress',e=>{if(e.key==='Enter')startQuiz();});
leaderboardIcon.addEventListener('click',()=>{leaderboard.classList.toggle('show');if(leaderboard.classList.contains('show'))updateLeaderboardDisplay();});

// --- Initialize ---
document.addEventListener('DOMContentLoaded',()=>{startSnowfall(50);updateLeaderboardDisplay();});
</script>
</body>
</html>
